<!DOCTYPE html>
<html lang="tk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aman Hayitmuradow - T√∂leg Hyzmaty</title>
    <style>
        :root { --bg: #f4f4f4; --card: #ffffff; --text: #333; --main: #d00000; --accent: #28a745; }
        .night-mode { --bg: #011627; --card: #1e2a38; --text: #ffffff; --main: #ff4d4d; }
        
        body { font-family: 'Segoe UI', sans-serif; background: var(--bg); color: var(--text); margin: 0; transition: 0.5s; overflow-x: hidden; }
        #snow-canvas { position: fixed; top: 0; left: 0; pointer-events: none; z-index: 100; }
        
        /* Akan √Ωazgy (4 dilde) */
        .marquee-container { background: var(--main); color: white; padding: 12px 0; font-weight: bold; overflow: hidden; white-space: nowrap; border-bottom: 3px solid #ffc107; font-size: 16px; }
        .marquee-text { display: inline-block; animation: scroll-left 25s linear infinite; }
        @keyframes scroll-left { 0% { transform: translateX(100%); } 100% { transform: translateX(-100%); } }

        .container { max-width: 420px; margin: auto; padding: 15px; position: relative; z-index: 10; }
        
        .header-tools { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; }
        .clock-box { font-weight: bold; color: #ffc107; background: #333; padding: 6px 12px; border-radius: 8px; font-family: monospace; font-size: 14px; box-shadow: 0 2px 5px rgba(0,0,0,0.3); }

        .lang-bar { display: flex; justify-content: center; gap: 8px; margin-bottom: 20px; }
        .lang-btn { cursor: pointer; border: 2px solid transparent; padding: 8px 10px; border-radius: 10px; background: var(--card); font-size: 14px; font-weight: bold; transition: 0.3s; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        .active-lang { border-color: var(--accent) !important; transform: scale(1.1); }

        .profile-card { background: var(--card); padding: 20px; border-radius: 15px; text-align: center; border-top: 5px solid var(--accent); box-shadow: 0 4px 10px rgba(0,0,0,0.1); margin-bottom: 20px; }
        .iban-box { background: #eee; padding: 12px; border-radius: 8px; border: 1px dashed #333; color: #000; font-family: monospace; font-size: 14px; margin-top: 10px; cursor: pointer; position: relative; font-weight: bold; }

        .card { background: var(--card); border-radius: 20px; overflow: hidden; box-shadow: 0 8px 30px rgba(0,0,0,0.2); }
        .card-header { background: var(--main); color: white; padding: 18px; text-align: center; }
        .card-body { padding: 25px; }
        
        input { width: 100%; padding: 15px; margin-bottom: 15px; border: 2px solid #ddd; border-radius: 12px; font-size: 18px; box-sizing: border-box; background: #fff; color: #000; outline: none; transition: 0.3s; }
        input:focus { border-color: var(--main); }
        .pay-btn { width: 100%; padding: 20px; background: var(--accent); color: white; border: none; border-radius: 12px; font-size: 22px; font-weight: bold; cursor: pointer; transition: 0.2s; box-shadow: 0 4px 15px rgba(40, 167, 69, 0.4); }
        .pay-btn:active { transform: scale(0.96); }

        #receipt-box { display: none; background: #fff; color: #000; padding: 20px; border: 2px dashed #333; border-radius: 10px; margin-top: 20px; font-family: monospace; line-height: 1.8; font-size: 14px; }
        .history-section { background: var(--card); padding: 15px; border-radius: 12px; margin-top: 20px; font-size: 13px; box-shadow: 0 2px 10px rgba(0,0,0,0.05); }
        
        .admin-trigger { text-align: center; margin-top: 40px; color: gray; cursor: pointer; font-size: 20px; opacity: 0.2; }
        .admin-panel { background: #222; color: #fff; padding: 20px; border-radius: 12px; margin-top: 10px; display: none; }
    </style>
</head>
<body onload="initSnow(); drawSnow(); loadSettings();">

    <canvas id="snow-canvas"></canvas>

    <div class="marquee-container">
        <div class="marquee-text" id="marquee-content">
            üéÑ T√§ze √Ωyly≈àyz gutly bolsun! ‚Ä¢ –° –ù–æ–≤—ã–º –ì–æ–¥–æ–º! ‚Ä¢ Happy New Year! ‚Ä¢ Mutlu Yƒ±llar! üéÖ
        </div>
    </div>

    <div class="container">
        <div class="header-tools">
            <button onclick="document.body.classList.toggle('night-mode')" style="border:none; background:none; font-size:24px; cursor:pointer;">üåó</button>
            <div id="full-date" style="font-size: 12px; font-weight: bold; color: gray;">30.12.2025</div>
            <div class="clock-box" id="clock">00:00:00</div>
        </div>

        <div class="lang-bar">
            <button class="lang-btn active-lang" id="btn-tk" onclick="changeLang('tk')">üáπüá≤ TK</button>
            <button class="lang-btn" id="btn-ru" onclick="changeLang('ru')">üá∑üá∫ RU</button>
            <button class="lang-btn" id="btn-tr" onclick="changeLang('tr')">üáπüá∑ TR</button>
            <button class="lang-btn" id="btn-en" onclick="changeLang('en')">üá∫üá∏ EN</button>
        </div>

        <div class="profile-card">
            <h2 style="margin:0; font-size: 20px; color: var(--main);">Aman Hayitmuradow</h2>
            <div class="iban-box" onclick="copyIban()">
                <span id="iban-num">TR15 0015 7000 0000 0201 4581 78</span>
                <div style="font-size:10px; color:var(--accent); margin-top:5px;">(G√ñ√á√úRMEK √ú√áIN BASY≈á)</div>
            </div>
        </div>

        <div class="card">
            <div class="card-header"><h2 id="title-as" style="margin:0; letter-spacing: 2px;">ALTYN ASYR</h2></div>
            <div class="card-body">
                <input type="tel" value="+993 6" id="phone">
                <input type="number" id="tmt_input" placeholder="0.00 TMT" oninput="calculate()">
                <div id="calc-res" style="text-align:center; font-weight:bold; color:var(--accent); margin-bottom:20px; font-size:30px; text-shadow: 1px 1px 2px rgba(0,0,0,0.1);">0.00 TL</div>
                <button class="pay-btn" id="pay-btn" onclick="processPayment()">T√ñLEG ET</button>
                
                <div id="receipt-box">
                    <h3 style="text-align:center; margin:0; border-bottom: 2px solid #333; padding-bottom: 5px;">üßæ T√ñLEG √áEKI</h3>
                    <div id="receipt-details" style="margin-top: 10px;"></div>
                    <div style="text-align:center; margin-top:10px; font-size:10px; color:gray;">¬© Aman Hayitmuradow Service</div>
                </div>
            </div>
        </div>

        <div class="history-section">
            <b id="hist-title">Ge√ßmi≈ü (History):</b>
            <hr>
            <div id="history-list" style="margin-top:5px; color: #555; line-height: 1.5;">T√∂leg √Ωok.</div>
        </div>

        <div class="admin-trigger" onclick="openAdmin()">‚öôÔ∏è</div>
        <div class="admin-panel" id="admin-panel">
            <b style="color:#ffc107;">Sazlamalar (Admin)</b><br>
            Kursy √º√Ωtget: <input type="number" id="rate-input" step="0.1" style="width:80px; font-size:14px; padding:8px; margin:10px 0; border-radius: 5px;">
            <button onclick="saveSettings()" style="padding:8px 20px; background:var(--accent); color:white; border:none; border-radius:8px; cursor:pointer; font-weight:bold;">OK</button>
        </div>
    </div>

    <script>
        let currentRate = 2.5; // ESASY KURS 2.50
        let currentLang = 'tk';
        
        const langs = {
            tk: { pay: "T√ñLEG ET", receipt: "T√ñLEG √áEKI", alert: "Mukdary girizi≈à!", copied: "Iban g√∂√ß√ºrildi!", history: "Ge√ßmi≈ü:", phone: "Tel", amount: "Mukdar", date: "Sene" },
            ru: { pay: "–û–ü–õ–ê–¢–ò–¢–¨", receipt: "–ß–ï–ö –û–ü–õ–ê–¢–´", alert: "–í–≤–µ–¥–∏—Ç–µ —Å—É–º–º—É!", copied: "–ò–±–∞–Ω —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω!", history: "–ò—Å—Ç–æ—Ä–∏—è:", phone: "–¢–µ–ª", amount: "–°—É–º–º–∞", date: "–î–∞—Ç–∞" },
            tr: { pay: "√ñDEME YAP", receipt: "√ñDEME Fƒ∞≈ûƒ∞", alert: "Miktarƒ± giriniz!", copied: "Iban kopyalandƒ±!", history: "Ge√ßmi≈ü:", phone: "Tel", amount: "Miktar", date: "Tarih" },
            en: { pay: "PAY NOW", receipt: "PAYMENT RECEIPT", alert: "Enter amount!", copied: "Iban copied!", history: "History:", phone: "Phone", amount: "Amount", date: "Date" }
        };

        function calculate() {
            let tmt = document.getElementById('tmt_input').value;
            let tl = (tmt * currentRate).toFixed(2);
            document.getElementById('calc-res').innerText = (tmt > 0 ? tl : "0.00") + " TL";
        }

        function copyIban() {
            navigator.clipboard.writeText(document.getElementById('iban-num').innerText);
            alert(langs[currentLang].copied);
        }

        function openAdmin() {
            let p = prompt("Gizlin Parol:");
            if(p === "30012001") document.getElementById('admin-panel').style.display = "block";
        }

        function saveSettings() {
            currentRate = document.getElementById('rate-input').value;
            localStorage.setItem('aman_rate_fixed', currentRate);
            alert("Kurs t√§zelendi: " + currentRate);
            calculate();
        }

        function loadSettings() {
            let r = localStorage.getItem('aman_rate_fixed');
            if(r) { 
                currentRate = parseFloat(r); 
                document.getElementById('rate-input').value = r; 
            } else {
                document.getElementById('rate-input').value = currentRate;
            }
            loadHistory();
        }

        function processPayment() {
            const tmt = document.getElementById('tmt_input').value;
            if(!tmt || tmt <= 0) { alert(langs[currentLang].alert); return; }

            const phone = document.getElementById('phone').value;
            const tl = (tmt * currentRate).toFixed(2);
            const id = Math.floor(Math.random() * 899999) + 111111;
            const now = new Date();
            const dateStr = now.toLocaleDateString() + " | " + now.toLocaleTimeString();

            document.getElementById('pay-btn').style.display = "none";
            document.getElementById('receipt-box').style.display = "block";
            
            const l = langs[currentLang];
            document.getElementById('receipt-details').innerHTML = `
                <b>ID:</b> #${id}<br>
                <b>${l.phone}:</b> ${phone}<br>
                <b>${l.amount}:</b> ${tmt} TMT<br>
                <b>TL:</b> ${tl} TL<br>
                <b>${l.date}:</b> ${dateStr}
            `;

            let hist = JSON.parse(localStorage.getItem('aman_hist_v2') || "[]");
            hist.unshift(`üìÖ ${dateStr} ‚Äî <b>${tmt} TMT</b>`);
            localStorage.setItem('aman_hist_v2', JSON.stringify(hist.slice(0,5)));
            loadHistory();

            // WhatsApp ugratmak
            setTimeout(() => {
                window.location.href = `https://wa.me/99364041065?text=üßæ *${l.receipt}*%0Aüì± *${l.phone}:* ${phone}%0Aüí∞ *${l.amount}:* ${tmt} TMT%0Aüíµ *TL:* ${tl} TL%0AüÜî *ID:* ${id}%0AüìÖ *${l.date}:* ${dateStr}`;
            }, 1000);
        }

        function loadHistory() {
            let h = JSON.parse(localStorage.getItem('aman_hist_v2') || "[]");
            document.getElementById('history-list').innerHTML = h.length ? h.join('<br>') : "T√∂leg √Ωok.";
            document.getElementById('hist-title').innerText = langs[currentLang].history;
        }

        function changeLang(lang) {
            currentLang = lang;
            document.querySelectorAll('.lang-btn').forEach(b => b.classList.remove('active-lang'));
            document.getElementById('btn-'+lang).classList.add('active-lang');
            document.getElementById('pay-btn').innerText = langs[lang].pay;
            loadHistory();
        }

        setInterval(() => {
            const n = new Date();
            document.getElementById('clock').innerText = n.toLocaleTimeString();
            document.getElementById('full-date').innerText = n.toLocaleDateString('tk-TM', { day: 'numeric', month: 'long', year: 'numeric' });
        }, 1000);

        // Snow Animation
        const canvas = document.getElementById('snow-canvas');
        const ctx = canvas.getContext('2d');
        let snow = [];
        function initSnow() {
            canvas.width = window.innerWidth; canvas.height = window.innerHeight;
            snow = [];
            for(let i=0; i<60; i++) snow.push({x:Math.random()*canvas.width, y:Math.random()*canvas.height, r:Math.random()*3+1, v:Math.random()*0.8+0.5});
        }
        function drawSnow() {
            ctx.clearRect(0,0,canvas.width,canvas.height); ctx.fillStyle="white"; ctx.beginPath();
            snow.forEach(s => { ctx.moveTo(s.x, s.y); ctx.arc(s.x, s.y, s.r, 0, Math.PI*2); s.y+=s.v; if(s.y>canvas.height) s.y=-10; });
            ctx.fill(); requestAnimationFrame(drawSnow);
        }
        window.onresize = initSnow;
    </script>
</body>
</html>
